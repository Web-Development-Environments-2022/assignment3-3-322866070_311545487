(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-281cbacc"],{"1f42":function(e,t,a){},37906:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{align:"center"}},[a("h1",{staticClass:"title"},[e._v("Search Recipes")]),a("b-form",{staticClass:"container",staticStyle:{"max-width":"500px"},on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},[a("b-form-group",{attrs:{id:"input-group-query","label-cols-sm":"3",label:"Search Query:","label-for":"query"}},[a("b-form-input",{staticStyle:{width:"500px"},attrs:{id:"query",type:"text",state:e.validateState("query")},model:{value:e.$v.form.query.$model,callback:function(t){e.$set(e.$v.form.query,"$model",t)},expression:"$v.form.query.$model"}})],1),a("b-form-group",{attrs:{id:"input-group-amount","label-cols-sm":"3",label:"Number:","label-for":"amount"}},[a("b-form-select",{staticStyle:{width:"500px"},attrs:{id:"amount",state:e.validateState("amount")},model:{value:e.$v.form.amount.$model,callback:function(t){e.$set(e.$v.form.amount,"$model",e._n(t))},expression:"$v.form.amount.$model"}},[a("option",{attrs:{value:"5"}},[e._v("5")]),a("option",{attrs:{value:"10"}},[e._v("10")]),a("option",{attrs:{value:"15"}},[e._v("15")])]),a("b-form-invalid-feedback",[e._v(" Number of recipes is required ")])],1),a("b-form-group",{attrs:{id:"input-group-cuisine","label-cols-sm":"3",label:"Cuisine:","label-for":"cuisine"}},[a("b-form-select",{staticStyle:{width:"500px"},attrs:{id:"cuisine",options:e.cuisines,state:e.validateState("cuisine")},model:{value:e.$v.form.cuisine.$model,callback:function(t){e.$set(e.$v.form.cuisine,"$model",t)},expression:"$v.form.cuisine.$model"}})],1),a("b-form-group",{attrs:{id:"input-group-diet","label-cols-sm":"3",label:"Diet:","label-for":"diet"}},[a("b-form-select",{staticStyle:{width:"500px"},attrs:{id:"diet",options:e.diets,state:e.validateState("diet")},model:{value:e.$v.form.diet.$model,callback:function(t){e.$set(e.$v.form.diet,"$model",t)},expression:"$v.form.diet.$model"}})],1),a("b-form-group",{attrs:{id:"input-group-intolerances","label-cols-sm":"3",label:"Intolerances:","label-for":"intolerances"}},[a("b-form-select",{staticStyle:{width:"500px"},attrs:{id:"intolerances",options:e.intolerances,state:e.validateState("intolerance")},model:{value:e.$v.form.intolerance.$model,callback:function(t){e.$set(e.$v.form.intolerance,"$model",t)},expression:"$v.form.intolerance.$model"}})],1),a("b-form-group",{attrs:{id:"input-group-watched","label-cols-sm":"3",label:"Watched:","label-for":"watched"}},[a("b-form-select",{staticStyle:{width:"500px"},attrs:{id:"watched",state:e.validateState("watched")},model:{value:e.$v.form.watched.$model,callback:function(t){e.$set(e.$v.form.watched,"$model",t)},expression:"$v.form.watched.$model"}},[a("option",{attrs:{value:"1"}},[e._v("Yes")]),a("option",{attrs:{value:"0"}},[e._v("No")])])],1),a("b-form-group",{attrs:{id:"input-group-favorite","label-cols-sm":"3",label:"Favorite:","label-for":"favorite"}},[a("b-form-select",{staticStyle:{width:"500px"},attrs:{id:"favorite",state:e.validateState("favorite")},model:{value:e.$v.form.favorite.$model,callback:function(t){e.$set(e.$v.form.favorite,"$model",t)},expression:"$v.form.favorite.$model"}},[a("option",{attrs:{value:"1"}},[e._v("Yes")]),a("option",{attrs:{value:"0"}},[e._v("No")])])],1),a("b-button",{staticStyle:{"margin-right":"4px"},attrs:{type:"reset",variant:"danger"}},[e._v("Reset")]),a("b-button",{staticStyle:{width:"250px","margin-left":"4px"},attrs:{type:"submit",variant:"primary"}},[e._v("Search")])],1),a("br")],1),e.recipes?a("div",{attrs:{align:"center"}},[e.recipes.length>0?a("div",{staticClass:"search-results",attrs:{align:"center"}},[a("b-container",[a("h3",[e._v(" Search Results: ")]),a("b-form-group",{staticStyle:{width:"300px"},attrs:{id:"input-group-sort","label-cols-sm":"3",label:"Sort By:","label-for":"sortBy"}},[a("b-form-select",{attrs:{id:"sortBy",state:e.validateState("sortBy")},on:{change:e.sortHandler},model:{value:e.$v.form.sortBy.$model,callback:function(t){e.$set(e.$v.form.sortBy,"$model",t)},expression:"$v.form.sortBy.$model"}},[a("option",{attrs:{value:"time"}},[e._v("Preparation time")]),a("option",{attrs:{value:"like"}},[e._v("Likes")])])],1),a("b-col",[a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{attrs:{pills:"",card:""}},e._l(e.recipes,(function(e,t){return a("b-tab",{key:e.id,attrs:{title:t+1+". "+e.title}},[a("SearchResultPreview",{attrs:{recipe:e}})],1)})),1)],1)],1)],1),a("br")],1):a("div",{attrs:{align:"center"}},[a("h3",[e._v(" No Results "),e._t("default")],2)])]):e._e()])},i=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"recipe-preview",attrs:{to:{name:"recipe",params:{recipeId:e.recipe.id}}}},[this.image_load?a("b-card",[a("b-card-header",{attrs:{align:"center"}},[a("h5",[e._v(e._s(this.recipe.title)+" ")])]),a("br"),a("router-link",{attrs:{to:{name:"recipe",params:{recipeId:e.recipe.id}}}},[a("b-card-img",{staticClass:"mb-3",staticStyle:{"max-width":"20rem",overflow:"auto",display:"inline-block"},attrs:{src:this.recipe.image,alt:"Card image",left:"",fluid:"fluid",tag:"article",align:"left"}})],1),a("b-card-text",[a("b-row",{staticStyle:{"padding-left":"10px"},attrs:{align:"center"}},[a("b-col",[a("small",[e._v("Ready In "+e._s(this.recipe.readyInMinutes)+" Minutes ")])]),a("b-col",[a("small",[e._v(e._s(this.recipe.servings)+" Servings")])])],1),a("b-row",{staticStyle:{"padding-left":"10px"},attrs:{align:"center"}},[a("b-col",[a("small",[e._v("Gluten Free")])]),a("b-col",[this.recipe.vegan?a("small",[e._v("Vegan")]):a("small",[e._v("Vegetarian")])])],1),a("b-row",{staticStyle:{"padding-left":"10px"},attrs:{align:"center"}},[a("b-col",[this.recipe.glutenFree?a("small",[e._v(" ✔ ")]):a("small",[e._v(" ✘ ")])]),a("b-col",[this.recipe.vegan||this.recipe.vegetarian?a("small",[e._v(" ✔ ")]):a("small",[e._v(" ✘ ")])])],1),a("b-row",{staticStyle:{"padding-left":"10px"},attrs:{align:"center"}},[a("b-col",[a("small",[e._v("Watched")])]),a("b-col",[a("small",[e._v("Favorite")])])],1),a("b-row",{staticStyle:{"padding-left":"10px"},attrs:{align:"center"}},[a("b-col",[(e.$root.store.username,a("small",[e._v(" ✘ ")]))]),a("b-col",[(e.$root.store.username,a("small",[e._v(" ✘ ")]))])],1)],1),a("div",{attrs:{align:"center"}},[a("b-button",{attrs:{variant:"primary",to:{name:"recipe",params:{recipeId:e.recipe.id}}}},[e._v("See Recipe")])],1),a("br"),a("b-card-footer",{staticClass:"mb-3",staticStyle:{"margin-top":"6rem"}},[e._v(e._s(this.recipe.aggregateLikes)+" Likes")])],1):e._e()],1)},o=[],l={mounted(){this.axios.get(this.recipe.image).then(e=>{this.image_load=!0})},data(){return{image_load:!1}},props:{recipe:{type:Object,required:!0},id:{type:Number,required:!0},title:{type:String,required:!0},readyInMinutes:{type:Number,required:!0},image:{type:String,required:!0},aggregateLikes:{type:Number,required:!1,default(){}}}},n=l,c=(a("76c1"),a("2877")),u=Object(c["a"])(n,s,o,!1,null,"4b0fd347",null),d=u.exports,m=["African","American","British","Cajun","Caribbean","Chinese","Eastern European","European","French","German","Greek","Indian","Irish","Italian","Japanese","Jewish","Korean","Latin American","Mediterranean","Mexican","Middle Eastern","Nordic","Southern","Spanish","Thai","Vietnamese"],p=["Gluten Free","Ketogenic","Vegetarian","Lacto-Vegetarian","Ovo-Vegetarian","Vegan","Pescetarian","Paleo","Primal","Low FODMAP","Whole30"],v=["Dairy","Egg","Gluten","Grain","Peanut","Seafood","Sesame","Shellfish","Soy","Sulfite","Tree Nut","Wheat"],f=a("b5ae"),h={name:"Search",data(){return{form:{query:"",cuisine:null,diet:null,intolerance:null,amount:"5",watched:null,favorite:null,sortBy:null,submitError:void 0},cuisines:[{value:null,text:"",disabled:!0}],diets:[{value:null,text:"",disabled:!0}],intolerances:[{value:null,text:"",disabled:!0}],errors:[],recipes:null,validated:!1}},validations:{form:{query:{alpha:f["alpha"]},cuisine:{},diet:{},intolerance:{},amount:{required:f["required"]},watched:{},favorite:{},sortBy:{}}},components:{SearchResultPreview:d},mounted(){this.cuisines.push(...m),this.diets.push(...p),this.intolerances.push(...v)},methods:{validateState(e){const{$dirty:t,$error:a}=this.$v.form[e];return t?!a:null},async Search(){try{const e=await this.axios.post("https://cookify.cs.bgu.ac.il/recipes/searchRecipes",{query:this.form.query,cuisine:this.form.cuisine,diet:this.form.diet,intolerance:this.form.intolerance,amount:parseInt(this.form.amount),watched:parseInt(this.form.watched),favorite:parseInt(this.form.favorite)});console.log("query: "+this.form.query),console.log("cuisine: "+this.form.cuisine),console.log("amount: "+this.form.amount),console.log("watched: "+this.form.watched),console.log("favorite: "+this.form.favorite),console.log(e);const t=e.data;this.recipes=[],this.recipes.push(...t),this.form.sortBy&&this.sortHandler(this.form.sortBy),console.log("this.recipes "+this.recipes)}catch(e){console.log(e.response),this.form.submitError=e.response.data.message}},onSearch(){this.$v.form.$touch(),this.$v.form.$anyError||this.Search()},onReset(){this.form={query:"",cuisine:null,diet:null,intolerance:null,amount:"5",watched:null,favorite:null,sortBy:null},this.$nextTick(()=>{this.$v.$reset()})},sortHandler(e){"time"===e&&this.recipes.sort((e,t)=>e.readyInMinutes<t.readyInMinutes?-1:1),"like"===e&&this.recipes.sort((e,t)=>e.aggregateLikes>t.aggregateLikes?-1:1)}}},b=h,g=(a("9062"),Object(c["a"])(b,r,i,!1,null,"03e17a82",null));t["default"]=g.exports},"76c1":function(e,t,a){"use strict";var r=a("c52d"),i=a.n(r);i.a},9062:function(e,t,a){"use strict";var r=a("1f42"),i=a.n(r);i.a},c52d:function(e,t,a){}}]);
//# sourceMappingURL=chunk-281cbacc.4cac97c6.js.map